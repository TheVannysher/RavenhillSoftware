<form [formGroup]="fieldForm" (submit)="submit()" class="grid grid-cols-6 py-4 mt-2 gap-4">
  <div class="col-span-6 p-2 h-min">
    <div class="flex justify-between items-center">
      <button (click)="back()" class="group/back cursor-pointer">
        <div class="flex gap-2 group-hover/back:gap-4 transition-all ease duration-200 items-center">
          <ng-icon class="text-neutral-500 group-hover/back:text-green-600" name="featherArrowLeft"
            size="1.5rem"></ng-icon>
          <p class="text-xl text-neutral-500 group-hover/back:text-green-600 font-semibold capitalize">back</p>
        </div>
      </button>
      <button [disabled]="fieldForm.invalid" type="submit" class="
      px-4 py-2 rounded-full 
      transition-all ease duration-150
      text-green-600
      border border-green-600
      hover:bg-green-600 hover:text-white
      hover:shadow
      disabled:bg-neutral-200
      disabled:text-neutral-500
      disabled:hover:shadow-none
      disabled:border-none
      disabled:hover:border-none
      ">
        <p *ngIf="!submitting" i18n>{{formData ? 'Save' : 'Create'}}</p>
        <ng-icon *ngIf="submitting" name="featherLoader" class="animate-spin text-green-600"></ng-icon>
      </button>
    </div>
  </div>
  <!-- FOR DEBUG PURPOSE -->
  <div class="col-span-3 bg-white shadow rounded-lg p-4">
    <p>form Data value</p>
    {{formData | json}}
  </div>
  <div class="col-span-3 bg-white shadow rounded-lg p-4">
    <p>formGroup value</p>
    {{fieldForm.value | json}}
  </div>
  <div class="col-span-3 bg-white shadow rounded-lg p-4">
    <p>formGroup status</p>
    {{fieldForm.status| json}}
  </div>
  <div class="col-span-3 bg-white shadow rounded-lg p-4">
    <p>vineGroup status</p>
    {{fieldForm.controls['vine'].status | json}}
  </div>
  <div class="col-span-6 lg:col-span-2 bg-white rounded-lg shadow overflow-y-auto overflow-x-clip">
    <div class="flex items-center justify-items-start gap-2 px-4 p-2">
      <p i18n class="text-center text-xl font-bold capitalize">Properties ðŸª´</p>
    </div>
    <div class="flex gap-2 justify-center items-center px-4 py-2">
      <label class="flex" for="identifier" i18n>identifier<span class="text-red-600">*</span></label>
      <input type="text" formControlName="name" name="name" placeholder="identifier" id="">
    </div>
  </div>
  <div formGroupName="vine" class="grid col-span-6 row-span-2 lg:col-span-4 bg-white rounded-lg shadow">
    <div class="grid grid-cols-1 justify-items-start  px-4 p-2">
      <p i18n class="text-center text-xl font-bold capitalize">Vines ðŸŒ±</p>
    </div>
    <div class="grid grid-cols-3 p-4 gap-2">
      <div class="col-span-3 md:col-span-1 flex items-center md:justify-end">
        <label for="variety">Variety<span class="text-red-600">*</span></label>
      </div>
      <div class="col-span-3 md:col-span-2 flex items-center">
        <select name="variety" formControlName="variety">
          <option *ngFor="let variety of varieties" [value]="variety.id">{{variety.name}}</option>
        </select>
      </div>
      <div class="col-span-3 md:col-span-1 flex items-center md:justify-end">
        <label for="quantity">Qty of vines to create<span class="text-red-600">*</span></label>
      </div>
      <div class="col-span-3 md:col-span-2 flex items-center">
        <input type="text" formControlName="quantity" placeholder="0" required />
      </div>
      <div class="col-span-3 md:col-span-1 flex items-center md:justify-end">
        <label for="vigor">Default vigor<span class="text-red-600">*</span></label>
      </div>
      <div class="col-span-3 md:col-span-2 flex items-center">
        <select name="vigor" formControlName="vigor">
          <option value="low" i18n>low</option>
          <option value="medium" i18n>medium</option>
          <option value="high" i18n>high</option>
          <option value="dead" i18n>dead</option>
        </select>
      </div>
      <div class="col-span-3 md:col-span-1 flex items-center md:justify-end">
        <label for="clusters">Qty of clusters<span class="text-red-600">*</span></label>
      </div>
      <div class="col-span-3 md:col-span-2 flex items-center">
        <input type="text" formControlName="clusters" placeholder="0" required />
      </div>
      <div class="col-span-3 text-center p-2">
        <p class="text-neutral-500">**All vines of same variety will be grouped into a block on form submition**</p>
        <p class="text-neutral-500">**Inputs fields with a red * are mandatory**</p>
      </div>
    </div>
    <div class="flex gap-2 justify-end items-center px-4 py-2">
      <button [disabled]="fieldForm.controls['vine'].invalid" (click)="addVines($event)" class="py-2 px-4
        rounded-full
        disabled:text-neutral-500
        disabled:bg-neutral-200
        transition-all ease duration-200
        text-blue-600
        hover:shadow
        hover:text-white
        hover:bg-blue-600
      hover:border-blue-600
      disabled:shadow-none
      disabled:hover:shadow-none
      disabled:hover:border-neutral-500">
        <p>add vine</p>
      </button>
    </div>
  </div>
  <div *ngIf="formData.vines && formData.vines.length > 0" class="col-span-6 bg-white rounded-lg shadow p-4">
    <div class="md:grid hidden md:grid-cols-4 text-lg text-neutral-500 pb-2 border-b mb-4">
      <div class="">
        <p i18n>id</p>
      </div>
      <div class="">
        <p i18n>variety</p>
      </div>
      <div class="">
        <p i18n># of cluster</p>
      </div>
      <div class="">
        <p>vigor</p>
      </div>
    </div>
    <div *ngFor="let vine of formData.vines; let i = index"
      class="grid grid-cols-2 md:grid-cols-4 p-2 {{ (i % 2) > 0 ? 'bg-neutral-200' : ''}}">
      <div class="content-center w-full overflow-hidden p-2">
        <p class="text-ellipsis">{{vine.id}}</p>
      </div>
      <div class="content-center w-full overflow-hidden p-2">
        <p>{{vine.variety.name}}</p>
      </div>
      <div class="content-center w-full overflow-hidden p-2">
        <p>{{vine.clusters | number}}</p>
      </div>
      <div class="content-center w-full overflow-hidden p-2">
        <p>{{vine.vigor}}</p>
      </div>
    </div>
  </div>
</form>